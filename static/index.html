<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的游戏梦工厂 🎮</title>
    <link rel="icon" href="/static/favicon.svg">
    
    <!-- Local Fonts -->
    <link rel="stylesheet" href="/css/fonts.css">

    <!-- Tailwind CSS (Local) -->
    <script src="/static/vendor/tailwindcss.js"></script>
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class', // We keep this but we'll effectively be in "light" mode visually
            theme: {
                extend: {
                    colors: {
                        primary: '#8b5cf6', // Violet
                        secondary: '#f472b6', // Pink
                        accent: '#fbbf24', // Amber
                        'dark-bg': '#fdf4ff', // Very light fuchsia/pink background
                        'dark-card': '#ffffff', // White cards
                        'dark-border': '#fbcfe8', // Light pink border
                        'text-main': '#334155', // Slate 700
                        'text-muted': '#64748b', // Slate 500
                    },
                    fontFamily: {
                        'fun': ['"ZCOOL KuaiLe"', 'cursive'],
                        'body': ['Nunito', 'sans-serif'],
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                        '3xl': '2rem',
                    }
                }
            }
        }
    </script>
    
    <!-- Marked.js for Markdown rendering (Local) -->
    <script src="/static/vendor/marked.min.js"></script>
    
    <!-- Prism.js for Syntax Highlighting (Local) -->
    <link href="/static/vendor/prism/prism-solarizedlight.min.css" rel="stylesheet" />
    <script src="/static/vendor/prism/prism.min.js"></script>
    <script src="/static/vendor/prism/prism-python.min.js"></script>
    <script src="/static/vendor/prism/prism-javascript.min.js"></script>
    <script src="/static/vendor/prism/prism-bash.min.js"></script>
    <script src="/static/vendor/prism/prism-json.min.js"></script>
    <script src="/static/vendor/prism/prism-typescript.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/app.css">
</head>
<body class="bg-dark-bg text-text-main font-body min-h-screen overflow-hidden selection:bg-primary selection:text-white">
    
    <!-- App Container -->
    <div id="app" class="flex h-screen border-8 border-dark-bg">
        
        <!-- Sidebar -->
        <aside class="w-72 bg-white rounded-3xl mr-4 border-4 border-dark-border flex flex-col shadow-xl overflow-hidden">
            <div class="p-6 border-b-2 border-dashed border-dark-border bg-gradient-to-r from-purple-100 to-pink-100">
                <h1 class="text-3xl font-fun text-primary flex items-center gap-2 drop-shadow-sm">
                    🚀 梦工厂
                </h1>
            </div>
            
            <nav class="flex-1 p-4 space-y-3">
                <button id="nav-projects" class="w-full flex items-center space-x-3 px-5 py-4 rounded-2xl hover:bg-purple-50 hover:text-primary transition-all transform hover:scale-105 bg-purple-50 text-primary font-bold shadow-sm">
                    <span class="text-2xl">🏰</span>
                    <span class="font-fun text-lg">我的城堡</span>
                </button>
                <button id="nav-chat" class="w-full flex items-center px-5 py-4 rounded-2xl hover:bg-purple-50 hover:text-primary transition-all transform hover:scale-105 text-gray-600 font-bold hover:shadow-sm group">
                    <div class="w-10 h-10 flex-shrink-0 flex items-center justify-center bg-white/50 rounded-lg mr-3 shadow-sm border-2 border-transparent group-hover:border-purple-100 transition-all">
                        <span class="text-2xl">🔮</span>
                    </div>
                    <span class="font-fun text-lg">魔法屋</span>
                </button>
                <button id="nav-settings" class="w-full flex items-center space-x-3 px-5 py-4 rounded-2xl hover:bg-purple-50 hover:text-primary transition-all transform hover:scale-105 text-gray-600 font-bold hover:shadow-sm">
                    <span class="text-2xl">🔧</span>
                    <span class="font-fun text-lg">工具箱</span>
                </button>
            </nav>
            
            <!-- Server Status -->
            <div class="p-4 border-t-2 border-dashed border-dark-border bg-gray-50">
                <div class="flex items-center space-x-2 px-4 py-3 bg-white rounded-xl border border-dark-border shadow-sm">
                    <span id="status-icon" class="animate-bounce">🔋</span>
                    <span id="status-text" class="text-sm font-bold text-green-600">能量满满</span>
                </div>
                <div class="mt-3 text-xs text-text-muted text-center font-fun">
                    Game Dream Factory v1.0
                </div>
            </div>
        </aside>
        
        <!-- Main Content Area -->
        <main class="flex-1 relative overflow-hidden bg-white rounded-3xl border-4 border-dark-border shadow-xl">
            
            <!-- Projects View -->
            <div id="projects-view" class="absolute inset-0 flex flex-col p-8 overflow-y-auto bg-theme-pattern">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-4xl font-fun font-bold mb-2 text-primary drop-shadow-sm">我的游戏世界 🌍</h2>
                        <p class="text-text-muted font-bold">在这里管理你的所有创意游戏作品！</p>
                    </div>
                    <button id="create-project-btn-main" class="px-8 py-4 bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl hover:from-purple-600 hover:to-primary transition-all shadow-lg flex items-center gap-3 transform hover:-translate-y-1 active:scale-95">
                        <span class="text-xl">✨</span> <span class="font-bold text-lg">创造新世界</span>
                    </button>
                </div>
                
                <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Projects will be populated here -->
                </div>
                
                <div id="no-projects-message" class="hidden text-center py-20 bg-white/80 rounded-3xl border-4 border-dashed border-dark-border">
                    <div class="text-8xl mb-6 animate-bounce">🎈</div>
                    <h3 class="text-2xl font-fun font-bold text-primary mb-3">还没有游戏哦</h3>
                    <p class="text-text-muted text-lg">快点击右上角的按钮，开始你的第一次冒险吧！</p>
                </div>
            </div>
            
            <!-- Chat View -->
            <div id="chat-view" class="hidden absolute inset-0 flex flex-col bg-white">
                <!-- Chat Container -->
                <div id="chat-container" class="flex-1 overflow-y-auto px-8 py-8 space-y-8 bg-theme-pattern relative">
                    
                    <!-- Floating Project Badge -->
                    <div class="absolute top-4 left-8 z-10 opacity-80 hover:opacity-100 transition-opacity">
                        <div class="flex items-center gap-2 bg-white/90 backdrop-blur px-4 py-2 rounded-2xl shadow-sm border-2 border-purple-100">
                            <span class="text-2xl">🏰</span>
                            <span id="current-project-name" class="font-fun font-bold text-primary text-xl">未选择</span>
                        </div>
                    </div>

                    <!-- Messages will be dynamically added here -->
                    
                    <!-- Welcome Message -->
                    <div id="welcome-message" class="text-center py-20 mt-10">
                        <div class="inline-block p-8 bg-white rounded-full shadow-xl mb-8 border-4 border-purple-100">
                            <div class="text-8xl animate-pulse">🌟</div>
                        </div>
                        <h2 class="text-3xl font-fun font-bold mb-4 text-primary">欢迎来到魔法屋！</h2>
                        <p class="text-lg text-text-muted font-bold bg-white/80 inline-block px-6 py-2 rounded-full">请选择一个游戏城堡，开始你的创造之旅吧！</p>
                    </div>
                </div>
                
                <!-- Input Area -->
                <div id="input-area" class="border-t-2 border-dashed border-dark-border bg-white px-8 py-6 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] z-10">
                    
                    <!-- Control Row: Sessions & Models -->
                    <div class="flex items-center justify-between gap-4 mb-4 text-sm font-bold flex-wrap">
                        
                        <!-- Left: Sessions -->
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-2 bg-orange-50 px-3 py-1.5 rounded-xl border border-orange-100">
                                <span class="text-orange-500">📜 冒险记录:</span>
                                <select id="session-select" class="bg-transparent border-none text-text-main focus:ring-0 cursor-pointer min-w-[150px] font-bold">
                                    <option value="">无记录</option>
                                </select>
                            </div>
                            <button id="new-session-btn" class="px-3 py-1.5 bg-orange-100 text-orange-600 rounded-xl hover:bg-orange-200 transition-colors font-bold shadow-sm flex items-center gap-1">
                                <span>➕</span> 新冒险
                            </button>
                        </div>

                        <!-- Right: Agent & Model -->
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-2 bg-purple-50 px-3 py-1.5 rounded-xl border border-purple-100">
                                <span class="text-primary">🧙‍♂️ 魔法导师:</span>
                                <select id="agent-select" class="bg-transparent border-none text-text-main focus:ring-0 cursor-pointer min-w-[120px]">
                                    <option value="">召唤中...</option>
                                </select>
                            </div>
                            <div class="flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-xl border border-blue-100">
                                <span class="text-blue-500">🧠 智慧大脑:</span>
                                <select id="model-select" class="bg-transparent border-none text-text-main focus:ring-0 cursor-pointer min-w-[150px]">
                                    <option value="">连接中...</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Attachments -->
                    <div id="attachments-preview" class="hidden mb-4 flex flex-wrap gap-3"></div>
                    
                    <!-- Input Row -->
                    <div class="flex items-end gap-3">
                        <input type="file" id="file-input" class="hidden" multiple accept="image/*,.pdf,.txt,.md,.json,.py,.js,.ts,.html,.css">
                        
                        <!-- Left buttons - fixed height to match textarea min-height -->
                        <div class="flex gap-2 flex-shrink-0">
                            <button id="attach-btn" class="w-[60px] h-[60px] flex items-center justify-center bg-yellow-50 border-2 border-yellow-200 rounded-2xl hover:bg-yellow-100 hover:border-yellow-400 transition-all text-yellow-600 shadow-sm" title="百宝箱 (上传文件)">
                                <span class="text-xl">🎒</span>
                            </button>
                            <button id="voice-btn" class="w-[60px] h-[60px] flex items-center justify-center bg-pink-50 border-2 border-pink-200 rounded-2xl hover:bg-pink-100 hover:border-pink-400 transition-all text-pink-600 shadow-sm" title="念咒语 (语音输入)">
                                <span class="text-xl">🎤</span>
                            </button>
                        </div>
                        
                        <!-- Textarea container -->
                        <div class="flex-1 relative">
                            <textarea 
                                id="message-input" 
                                rows="1" 
                                style="height: 60px; min-height: 60px; max-height: 200px;"
                                placeholder="告诉魔法导师你想做什么游戏... (Shift+Enter 换行, Enter 发送)"
                                class="w-full px-5 py-4 pr-14 bg-gray-50 border-2 border-gray-200 rounded-2xl focus:border-primary focus:bg-white focus:outline-none resize-none shadow-inner text-lg transition-colors box-border"
                            ></textarea>
                            <button id="send-icon-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-primary text-white rounded-xl hover:bg-purple-600 transition-colors shadow-md z-10" title="发送">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform rotate-90" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Right buttons - fixed height -->
                        <button id="send-btn" class="hidden h-[60px] px-8 bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl hover:from-purple-600 hover:to-primary transition-all font-fun font-bold text-xl shadow-lg flex items-center gap-2 flex-shrink-0">
                            <span>✨</span> 施法
                        </button>
                        <button id="stop-btn" class="hidden h-[60px] px-8 bg-red-500 text-white rounded-2xl hover:bg-red-600 transition-colors font-fun font-bold text-xl shadow-lg flex items-center gap-2 flex-shrink-0">
                            <span>✋</span> 停止
                        </button>
                    </div>
                </div>
            </div>
            
        </main>
        
    </div>
    
    <!-- Create Project Modal -->
    <div id="create-project-modal" class="hidden fixed inset-0 bg-purple-900/40 flex items-center justify-center z-50 backdrop-blur-md">
        <div class="bg-white border-4 border-purple-200 rounded-3xl p-8 w-96 shadow-2xl transform scale-100 transition-transform">
            <h3 class="text-2xl font-fun font-bold mb-6 text-primary text-center">✨ 创造新世界 ✨</h3>
            <form id="create-project-form">
                <div class="mb-8">
                    <label class="block text-lg font-bold mb-3 text-text-main">给你的世界起个名字</label>
                    <input 
                        type="text" 
                        id="project-name-input" 
                        class="w-full px-6 py-3 bg-purple-50 border-2 border-purple-100 rounded-xl focus:border-primary focus:outline-none font-bold text-primary placeholder-purple-200"
                        placeholder="my-super-game"
                        required
                    >
                </div>
                <div class="flex justify-between gap-4">
                    <button type="button" id="cancel-create-btn" class="flex-1 px-4 py-3 bg-gray-100 border-2 border-gray-200 text-gray-500 rounded-xl hover:bg-gray-200 font-bold transition-colors">
                        再想想
                    </button>
                    <button type="submit" class="flex-1 px-4 py-3 bg-primary text-white rounded-xl hover:bg-purple-600 font-bold shadow-lg transform hover:-translate-y-1 transition-all">
                        开始创造
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden fixed inset-0 bg-purple-900/40 flex items-center justify-center z-50 backdrop-blur-md">
        <div class="bg-white border-4 border-purple-200 rounded-3xl w-[700px] max-h-[85vh] overflow-hidden shadow-2xl flex flex-col">
            <!-- Header -->
            <div class="px-8 py-6 border-b-2 border-purple-100 bg-purple-50 flex items-center justify-between">
                <h3 class="text-2xl font-fun font-bold flex items-center gap-3 text-primary">
                    <span class="text-3xl">⚙️</span> 工厂设置
                </h3>
                <button id="close-settings-btn" class="w-10 h-10 flex items-center justify-center rounded-full bg-white text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all text-2xl font-bold shadow-sm">&times;</button>
            </div>
            
            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-8 space-y-8 bg-theme-pattern">
                
                <!-- OpenCode Server Status -->
                <div class="bg-white rounded-2xl border-2 border-purple-100 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <div class="px-6 py-4 border-b border-purple-50 bg-purple-50/50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-primary">
                            <span class="text-xl">🖥️</span> 核心引擎
                        </h4>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex items-center justify-between bg-gray-50 p-4 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span id="server-status-dot" class="w-4 h-4 rounded-full bg-gray-300 ring-4 ring-gray-100"></span>
                                <span id="server-status-text" class="font-bold text-gray-600">检测中...</span>
                            </div>
                            <button id="restart-server-btn" class="px-4 py-2 bg-white border-2 border-purple-100 hover:border-primary hover:text-primary rounded-xl transition-all text-sm font-bold shadow-sm flex items-center gap-2">
                                🔄 重启引擎
                            </button>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-blue-50/50 rounded-xl p-4 border border-blue-100">
                                <div class="text-blue-400 text-xs font-bold mb-1 uppercase tracking-wider">连接端口</div>
                                <div class="font-mono text-blue-700 font-bold text-lg" id="server-port">2380</div>
                            </div>
                            <div class="bg-blue-50/50 rounded-xl p-4 border border-blue-100">
                                <div class="text-blue-400 text-xs font-bold mb-1 uppercase tracking-wider">工厂地址</div>
                                <div class="font-mono text-blue-700 font-bold text-sm">localhost:2380</div>
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-xl p-4 border border-gray-100">
                            <div class="text-gray-400 text-xs font-bold mb-1 uppercase tracking-wider">引擎路径</div>
                            <div class="font-mono text-gray-600 text-xs truncate" id="opencode-path">检测中...</div>
                        </div>
                    </div>
                </div>
                
                <!-- Whisper Status -->
                <div class="bg-white rounded-2xl border-2 border-pink-100 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <div class="px-6 py-4 border-b border-pink-50 bg-pink-50/50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-secondary">
                            <span class="text-xl">🎤</span> 魔法耳朵 (语音)
                        </h4>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex items-center justify-between bg-gray-50 p-4 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span id="whisper-status-dot" class="w-4 h-4 rounded-full bg-gray-300 ring-4 ring-gray-100"></span>
                                <span id="whisper-status-text" class="font-bold text-gray-600">检测中...</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-pink-50/50 rounded-xl p-4 border border-pink-100">
                                <div class="text-pink-400 text-xs font-bold mb-1 uppercase tracking-wider">魔法模型</div>
                                <div id="whisper-model" class="font-bold text-pink-700">base</div>
                            </div>
                            <div class="bg-pink-50/50 rounded-xl p-4 border border-pink-100">
                                <div class="text-pink-400 text-xs font-bold mb-1 uppercase tracking-wider">魔法触媒</div>
                                <div id="whisper-device" class="font-bold text-pink-700">auto</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400 font-bold bg-gray-50 p-3 rounded-lg border border-gray-100">
                            💡 想让电脑听懂你的话？需要安装这些魔法石: <code class="bg-white px-2 py-1 rounded border border-gray-200 text-primary mx-1">pip install faster-whisper sounddevice numpy torch</code>
                        </div>
                    </div>
                </div>
                
                <!-- Projects Root Directory -->
                <div class="bg-white rounded-2xl border-2 border-orange-100 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <div class="px-6 py-4 border-b border-orange-50 bg-orange-50/50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-accent">
                            <span class="text-xl">📁</span> 世界仓库
                        </h4>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-sm text-gray-500 font-bold">所有的游戏世界都存放在这里。</p>
                        <div class="flex gap-3">
                            <input 
                                type="text" 
                                id="projects-root-input" 
                                class="flex-1 px-4 py-3 bg-orange-50/50 border-2 border-orange-100 rounded-xl focus:border-accent focus:bg-white focus:outline-none text-sm font-mono text-orange-800"
                                placeholder="C:\Users\...\game_projects"
                            >
                            <button id="open-projects-root-btn" class="px-4 py-3 bg-orange-50 border-2 border-orange-100 hover:border-accent rounded-xl transition-colors text-lg" title="打开仓库">
                                📂
                            </button>
                        </div>
                        <div class="flex justify-end">
                            <button id="save-projects-root-btn" class="px-6 py-2 bg-accent text-white rounded-xl hover:bg-amber-500 transition-colors text-sm font-bold shadow-md transform hover:-translate-y-0.5">
                                保存位置
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Web Builder Info -->
                <div class="bg-white rounded-2xl border-2 border-gray-100 overflow-hidden shadow-sm">
                    <div class="px-6 py-4 border-b border-gray-50 bg-gray-50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-gray-500">
                            <span class="text-xl">ℹ️</span> 关于工厂
                        </h4>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-gray-50 rounded-xl p-4 border border-gray-100">
                                <div class="text-gray-400 text-xs font-bold mb-1 uppercase tracking-wider">版本号</div>
                                <div class="font-bold text-gray-700">1.0.0 (Kids Edition)</div>
                            </div>
                            <div class="bg-gray-50 rounded-xl p-4 border border-gray-100">
                                <div class="text-gray-400 text-xs font-bold mb-1 uppercase tracking-wider">服务端口</div>
                                <div class="font-mono text-gray-700 font-bold" id="web-port">8765</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Personal Rules -->
                <div class="bg-white rounded-2xl border-2 border-indigo-100 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <div class="px-6 py-4 border-b border-indigo-50 bg-indigo-50/50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-indigo-500">
                            <span class="text-xl">📝</span> 魔法契约 (规则)
                        </h4>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-sm text-gray-500 font-bold">在这里写下你的规则，每次开始新冒险时，魔法助手都会遵守哦。</p>
                        <textarea 
                            id="personal-rules-input" 
                            rows="4" 
                            placeholder="例如：请用中文回答。代码要加注释。..."
                            class="w-full px-4 py-3 bg-indigo-50/30 border-2 border-indigo-100 rounded-xl focus:border-indigo-400 focus:bg-white focus:outline-none resize-none text-sm font-medium"
                        ></textarea>
                        <div class="flex justify-end">
                            <button id="save-rules-btn" class="px-6 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors text-sm font-bold shadow-md transform hover:-translate-y-0.5">
                                签订契约
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Debug Options -->
                <div class="bg-white rounded-2xl border-2 border-gray-100 overflow-hidden shadow-sm opacity-70 hover:opacity-100 transition-opacity">
                    <div class="px-6 py-4 border-b border-gray-50 bg-gray-50">
                        <h4 class="font-bold text-lg flex items-center gap-2 text-gray-500">
                            <span class="text-xl">🔧</span> 维修通道
                        </h4>
                    </div>
                    <div class="p-6 space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-xl transition-colors">
                            <input type="checkbox" id="debug-enabled" class="w-5 h-5 rounded-md border-2 border-gray-300 text-primary focus:ring-primary/30">
                            <span class="font-bold text-gray-600">显示维修日志</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-xl transition-colors">
                            <input type="checkbox" id="verbose-debug" class="w-5 h-5 rounded-md border-2 border-gray-300 text-primary focus:ring-primary/30">
                            <span class="font-bold text-gray-600">详细 API 记录</span>
                        </label>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-white/80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="text-center p-12 bg-white rounded-3xl border-4 border-purple-100 shadow-2xl animate-bounce">
            <div class="inline-block text-6xl mb-4">✨</div>
            <div class="text-2xl font-fun font-bold text-primary" id="loading-text">施法中...</div>
        </div>
    </div>
    
    <!-- Toast Notifications Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 space-y-3 z-[60]"></div>
    
    <!-- Scripts -->
    <script src="/js/theme.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/events.js"></script>
    <script src="/js/markdown.js"></script>
    <script src="/js/components.js"></script>
    <script src="/js/app.js"></script>
    
</body>
</html>
